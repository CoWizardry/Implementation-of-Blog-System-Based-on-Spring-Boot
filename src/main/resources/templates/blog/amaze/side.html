<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<div th:fragment="side-fragment" id="sidebar" class="lg:w-1/3 w-full space-y-4 ml-4">
    <section>
        <div class="bg-white rounded-3xl rounded-lg p-4 mt-4">
            <div class="border-b pb-2 mb-4">
                <h2 class="text-lg font-bold text-gray-800">搜索文章</h2>
            </div>
            <div>
                <form method="get" onsubmit="return false;" accept-charset="utf-8" class="flex justify-center">
                    <input type="text" name="keyword" id="searchbox" placeholder="输入关键字搜索"
                           class="w-3/4 p-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm">
                    <button type="submit" class="bg-blue-500 text-white p-2 rounded-r-lg hover:bg-blue-600 focus:outline-none text-sm"
                            onclick="search()">
                        搜索
                    </button>
                </form>
            </div>
        </div>
    </section>
    <section>
        <div class="bg-white shadow-md rounded-3xl p-4">
            <div class="border-b pb-2 mb-4">
                <h2 class="text-xl font-bold text-gray-800">热门标签</h2>
            </div>
            <div class="flex flex-wrap gap-2">
                <th:block th:if="${null != hotTags}">
                    <th:block th:each="hotTag : ${hotTags}">
                        <a th:href="@{'/tag/' + ${hotTag.tagName}}" class="bg-blue-100 text-blue-600 px-3 py-1 rounded-full text-sm hover:bg-blue-200 transition duration-300 ease-in-out">
                            <th:block th:text="${hotTag.tagName}+'('+${hotTag.tagCount}+')'"></th:block>
                        </a>
                    </th:block>
                </th:block>
            </div>
        </div>
    </section>

    <section>
        <div class="bg-white shadow-md rounded-3xl p-4">
            <div class="border-b pb-2 mb-4">
                <h2 class="text-xl font-bold text-gray-800">最新发布</h2>
            </div>
            <ul class="space-y-2">
                <th:block th:if="${null != newBlogs}">
                    <th:block th:each="newBlog : ${newBlogs}">
                        <li>
                            <a th:href="@{'/blog/' + ${newBlog.blogId}}" class="block text-blue-600 hover:text-blue-800 transition duration-300 ease-in-out">
                                <th:block th:text="${newBlog.blogTitle}"></th:block>
                            </a>
                        </li>
                    </th:block>
                </th:block>
            </ul>
        </div>
    </section>

    <section>
        <div class="bg-white shadow-md rounded-3xl p-4">
            <div class="border-b pb-2 mb-4">
                <h2 class="text-xl font-bold text-gray-800">点击最多</h2>
            </div>
            <ul class="space-y-2">
                <th:block th:if="${null != hotBlogs}">
                    <th:block th:each="hotBlog : ${hotBlogs}">
                        <li>
                            <a th:href="@{'/blog/' + ${hotBlog.blogId}}" class="block text-blue-600 hover:text-blue-800 transition duration-300 ease-in-out">
                                <th:block th:text="${hotBlog.blogTitle}"></th:block>
                            </a>
                        </li>
                    </th:block>
                </th:block>
            </ul>
        </div>
    </section>
    <!-- 新增知乎热搜的 section -->
    <section>
        <div class="bg-white shadow-md rounded-3xl p-4">
            <div class="border-b pb-2 mb-4">
                <h2 class="text-xl font-bold text-gray-800">知乎热搜</h2>
            </div>
            <ul id="zhihu-hot" class="space-y-2">
                <!-- 热搜内容将在这里动态更新 -->
            </ul>
        </div>
    </section>
    <script>
        // 获取知乎热搜数据并更新DOM
        function updateZhihuHot() {
            fetch('https://api.oick.cn/api/hot?type=zhihu')
                .then(response => response.json())
                .then(data => {
                    const hotList = data.data.slice(0, 10); // 获取前10个热搜
                    const zhihuHotElement = document.getElementById('zhihu-hot');
                    zhihuHotElement.innerHTML = ''; // 清空之前的内容

                    hotList.forEach(item => {
                        const li = document.createElement('li');
                        li.innerHTML = `<a href="${item.url}" class="block text-blue-600 hover:text-blue-800 transition duration-300 ease-in-out" target="_blank">${item.index}. ${item.title} (${item.hot})</a>`;
                        zhihuHotElement.appendChild(li);
                    });
                })
                .catch(error => console.error('获取知乎热搜失败:', error));
        }

        // 初次加载时获取数据
        updateZhihuHot();

        // 每小时更新一次
        setInterval(updateZhihuHot, 3600000);
    </script>
</div>



</html>
